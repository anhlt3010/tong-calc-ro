<div class="grid">
  <div class="col-fixed">
    <button
      pButton
      type="button"
      label="Calculate"
      (click)="logModel()"
    ></button>
  </div>
  <div class="col-fixed">
    <button
      pButton
      type="button"
      [disabled]="isLoadingItemSet || !hasItemChanged"
      label="Save"
      (click)="saveItemSet()"
    ></button>
  </div>
  <div class="col-fixed">
    <button
      pButton
      type="button"
      [disabled]="isLoadingItemSet"
      label="Load"
      (click)="loadItemSet()"
    ></button>
  </div>
  <div class="col-2">
    <div class="p-inputgroup">
      <span class="p-inputgroup-addon" style="width: 80px">Class</span>
      <p-dropdown
        inputId="character"
        [autoDisplayFirst]="false"
        [options]="characterList"
        [(ngModel)]="selectedCharacterId"
        placeholder="Class"
      ></p-dropdown>
    </div>
  </div>
  <div class="col-2">
    <div class="p-inputgroup">
      <span class="p-inputgroup-addon" style="width: 80px">Level</span>
      <p-dropdown
        inputId="level"
        [autoDisplayFirst]="false"
        [options]="levelList"
        [(ngModel)]="model.level"
        (ngModelChange)="onBaseStatusChange()"
      ></p-dropdown>
    </div>
  </div>
  <div class="col-2">
    <div class="p-inputgroup">
      <span class="p-inputgroup-addon" style="width: 80px">Job</span>
      <p-dropdown
        inputId="jobLevel"
        [autoDisplayFirst]="false"
        [options]="jobList"
        [(ngModel)]="model.jobLevel"
        (ngModelChange)="onBaseStatusChange()"
      ></p-dropdown>
    </div>
  </div>
</div>
<div class="grid">
  <!-- Left Side -->
  <div class="p-fluid col-7">
    <!-- Status -->
    <div class="grid grid-nogutter">
      <div class="col-4">
        <div class="grid grid-nogutter">
          <div class="col-12">
            <span class="p-inputgroup-addon" style="width: 250px"
              >Available Status Point: {{ availablePoints }}</span
            >
          </div>
          <!-- STR -->
          <div class="col-12">
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon" style="width: 55px">Str</span>
              <p-dropdown
                inputId="str"
                [autoDisplayFirst]="false"
                [options]="mainStatusList"
                [(ngModel)]="model.str"
                (ngModelChange)="onBaseStatusChange()"
              ></p-dropdown>
              <div>need 20</div>
              <div>+ {{ model.jobStr }}</div>
              <div>item {{ totalSummary?.str || 0 }}</div>
            </div>
          </div>
          <!-- AGI -->
          <div class="col-12">
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon" style="width: 55px">Agi</span>
              <p-dropdown
                inputId="agi"
                [autoDisplayFirst]="false"
                [options]="mainStatusList"
                [(ngModel)]="model.agi"
                (ngModelChange)="onBaseStatusChange()"
              ></p-dropdown>
              <div>next 20</div>
              <div>+ {{ model.jobAgi }}</div>
              <div>item {{ totalSummary?.agi || 0 }}</div>
            </div>
          </div>
          <!-- VIT -->
          <div class="col-12">
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon" style="width: 55px">Vit</span>
              <p-dropdown
                inputId="vit"
                [autoDisplayFirst]="false"
                [options]="mainStatusList"
                [(ngModel)]="model.vit"
                (ngModelChange)="onBaseStatusChange()"
              ></p-dropdown>
              <div>next 20</div>
              <div>+ {{ model.jobVit }}</div>
              <div>item {{ totalSummary?.vit || 0 }}</div>
            </div>
          </div>
          <!-- INT -->
          <div class="col-12">
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon" style="width: 55px">Int</span>
              <p-dropdown
                inputId="int"
                [autoDisplayFirst]="false"
                [options]="mainStatusList"
                [(ngModel)]="model.int"
                (ngModelChange)="onBaseStatusChange()"
              ></p-dropdown>
              <div>next 20</div>
              <div>+ {{ model.jobInt }}</div>
              <div>item {{ totalSummary?.int || 0 }}</div>
            </div>
          </div>
          <!-- DEX -->
          <div class="col-12">
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon" style="width: 55px">Dex</span>
              <p-dropdown
                inputId="dex"
                [autoDisplayFirst]="false"
                [options]="mainStatusList"
                [(ngModel)]="model.dex"
                (ngModelChange)="onBaseStatusChange()"
              ></p-dropdown>
              <div>next 20</div>
              <div>+ {{ model.jobDex }}</div>
              <div>item {{ totalSummary?.dex || 0 }}</div>
            </div>
          </div>
          <!-- LUK -->
          <div class="col-12">
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon" style="width: 55px">Luk</span>
              <p-dropdown
                inputId="luk"
                [autoDisplayFirst]="false"
                [options]="mainStatusList"
                [(ngModel)]="model.luk"
                (ngModelChange)="onBaseStatusChange()"
              ></p-dropdown>
              <div>next 20</div>
              <div>+ {{ model.jobLuk }}</div>
              <div>item {{ totalSummary?.luk || 0 }}</div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-4">
        <div class="grid grid-nogutter">
          <div class="col-12">Atk: {{ totalSummary?.atk || 0 }}</div>
          <div class="col-12">Atk %: {{ totalSummary?.["atk_%"] }}</div>
          <div class="col-12">ASPD: {{ totalSummary?.aspd || 0 }}</div>
          <div class="col-12">Hit: {{ totalSummary?.hit || 0 }}</div>
          <div class="col-12">
            Perfect Hit: {{ totalSummary?.perfectHit || 0 }}
          </div>
          <div class="col-12">Cri Rate: {{ totalSummary?.cri || 0 }}</div>
          <div class="col-12">Cri Dmg: {{ totalSummary?.criDmg || 0 }}</div>
        </div>
      </div>
      <div class="col-4">
        <div class="grid grid-nogutter">
          <div class="col-12">
            Def: {{ totalSummary?.def || 0 }}, Mdef:
            {{ totalSummary?.mdef || 0 }}
          </div>
          <div class="col-12">Flee: {{ totalSummary?.flee || 0 }}</div>
          <div class="col-12">Matk: {{ totalSummary?.matk || 0 }}</div>
          <div class="col-12">Matk %: {{ totalSummary?.["matk_%"] }}</div>
          <div class="col-12">
            After Cast Delay: {{ totalSummary?.acd || 0 }}
          </div>
          <div class="col-12">Fixe Cast Time: {{ totalSummary?.fct || 0 }}</div>
          <div class="col-12">
            Variable Cast Time: {{ totalSummary?.vct || 0 }}
          </div>
        </div>
      </div>
    </div>

    <!-- Weapon -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="weapon"
          [autoDisplayFirst]="false"
          [options]="weaponList"
          [(ngModel)]="model.weapon"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('weapon', $event.value, model.weaponRefine)"
          (onClear)="onClearItem('weapon')"
          placeholder="weapon"
        ></p-dropdown>
      </div>
      <div class="col-fixed" style="width: 80px">
        <p-dropdown
          inputId="weaponRefine"
          [options]="refineList"
          [(ngModel)]="model.weaponRefine"
          [disabled]="!model.weapon"
          (onChange)="onSelectItem('weapon', model.weapon, $event.value)"
        ></p-dropdown>
      </div>
      <div class="col">
        <p-dropdown
          inputId="weaponCard1"
          [autoDisplayFirst]="false"
          [options]="weaponCardList"
          [(ngModel)]="model.weaponCard1"
          [disabled]="!model.weapon"
          [showClear]="true"
          (onChange)="onSelectItem('weaponCard1', $event.value)"
          placeholder="Card 1"
        ></p-dropdown>
      </div>
      <div class="col">
        <p-dropdown
          inputId="weaponCard2"
          [autoDisplayFirst]="false"
          [options]="weaponCardList"
          [(ngModel)]="model.weaponCard2"
          [disabled]="!model.weapon"
          [showClear]="true"
          (onChange)="onSelectItem('weaponCard2', $event.value)"
          placeholder="Card2"
        ></p-dropdown>
      </div>
      <div class="col">
        <p-dropdown
          inputId="weaponCard3"
          [autoDisplayFirst]="false"
          [options]="weaponCardList"
          [(ngModel)]="model.weaponCard3"
          [disabled]="!model.weapon"
          [showClear]="true"
          (onChange)="onSelectItem('weaponCard3', $event.value)"
          placeholder="Card3"
        ></p-dropdown>
      </div>
    </div>

    <!-- Shield -->
    <div class="grid grid-nogutter" *ngIf="isShowShield()">
      <div class="col-3">
        <p-dropdown
          inputId="shield"
          [autoDisplayFirst]="false"
          [options]="shieldList"
          [(ngModel)]="model.shield"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('shield', $event.value, model.shieldRefine)"
          placeholder="Shield"
        ></p-dropdown>
      </div>
      <div class="col-fixed" style="width: 80px">
        <p-dropdown
          [options]="refineList"
          [(ngModel)]="model.shieldRefine"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="shieldCard"
          [autoDisplayFirst]="false"
          [options]="shieldCardList"
          [(ngModel)]="model.shieldCard"
          [disabled]="!model.shield"
          [showClear]="true"
          placeholder="Card"
        ></p-dropdown>
      </div>
    </div>

    <!-- Head Upper -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="headUpper"
          [autoDisplayFirst]="false"
          [options]="headUpperList"
          [(ngModel)]="model.headUpper"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="
            onSelectItem('headUpper', $event.value, model.headUpperRefine)
          "
          (onClear)="onClearItem('headUpper')"
          placeholder="Head Upper"
        ></p-dropdown>
      </div>
      <div class="col-fixed" style="width: 80px">
        <p-dropdown
          [options]="refineList"
          [(ngModel)]="model.headUpperRefine"
          [disabled]="!model.headUpper"
          (onChange)="onSelectItem('headUpper', model.headUpper, $event.value)"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="headUpperCard"
          [autoDisplayFirst]="false"
          [options]="headCardList"
          [(ngModel)]="model.headUpperCard"
          [disabled]="!model.headUpper"
          [showClear]="true"
          (onChange)="onSelectItem('headUpperCard', $event.value)"
          placeholder="Card"
        ></p-dropdown>
      </div>
    </div>

    <!-- Head Middle -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="headMiddle"
          [autoDisplayFirst]="false"
          [options]="headMiddleList"
          [(ngModel)]="model.headMiddle"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('headMiddle', $event.value)"
          (onClear)="onClearItem('headMiddle')"
          placeholder="Middle"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="headMiddleCard"
          [autoDisplayFirst]="false"
          [options]="headCardList"
          [(ngModel)]="model.headMiddleCard"
          [disabled]="!model.headMiddle"
          [showClear]="true"
          (onChange)="onSelectItem('headMiddleCard', $event.value)"
          placeholder="Card"
        ></p-dropdown>
      </div>
      <div class="col-12">
        <div class="grid">
          <div class="col-3"></div>
          <div class="col-3">
            <p-dropdown
              inputId="headMiddleEnchant1"
              [autoDisplayFirst]="false"
              [options]="headMiddleEnchant1List"
              [(ngModel)]="model.headMiddleEnchant1"
              [showClear]="true"
              [disabled]="headMiddleEnchant1List.length === 0"
              (onChange)="onSelectItem('headMiddleEnchant1', $event.value)"
              placeholder="Enchant 2"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="headMiddleEnchant2"
              [autoDisplayFirst]="false"
              [options]="headMiddleEnchant2List"
              [(ngModel)]="model.headMiddleEnchant2"
              [showClear]="true"
              [disabled]="headMiddleEnchant2List.length === 0"
              (onChange)="onSelectItem('headMiddleEnchant2', $event.value)"
              placeholder="Enchant 3"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="headMiddleEnchant3"
              [autoDisplayFirst]="false"
              [options]="headMiddleEnchant3List"
              [(ngModel)]="model.headMiddleEnchant3"
              [showClear]="true"
              [disabled]="headMiddleEnchant3List.length === 0"
              (onChange)="onSelectItem('headMiddleEnchant3', $event.value)"
              placeholder="Enchant 4"
            ></p-dropdown>
          </div>
        </div>
      </div>
    </div>

    <!-- Head Lower -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="headLower"
          [autoDisplayFirst]="false"
          [options]="headLowerList"
          [(ngModel)]="model.headLower"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('headLower', $event.value)"
          (onClear)="onClearItem('headLower')"
          placeholder="Lower"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="headLowerEnchant1"
          [autoDisplayFirst]="false"
          [options]="headLowerEnchant1List"
          [(ngModel)]="model.headLowerEnchant1"
          [showClear]="true"
          [disabled]="headLowerEnchant1List.length === 0 || !model.headLower"
          (onChange)="onSelectItem('headLowerEnchant1', $event.value)"
          placeholder="Enchant 2"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="headLowerEnchant2"
          [autoDisplayFirst]="false"
          [options]="headLowerEnchant2List"
          [(ngModel)]="model.headLowerEnchant2"
          [showClear]="true"
          [disabled]="headLowerEnchant2List.length === 0 || !model.headLower"
          (onChange)="onSelectItem('headLowerEnchant2', $event.value)"
          placeholder="Enchant 3"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="headLowerEnchant3"
          [autoDisplayFirst]="false"
          [options]="headLowerEnchant3List"
          [(ngModel)]="model.headLowerEnchant3"
          [showClear]="true"
          [disabled]="headLowerEnchant3List.length === 0 || !model.headLower"
          (onChange)="onSelectItem('headLowerEnchant3', $event.value)"
          placeholder="Enchant 4"
        ></p-dropdown>
      </div>
    </div>

    <!-- Armor -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="armor"
          [autoDisplayFirst]="false"
          [options]="armorList"
          [(ngModel)]="model.armor"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('armor', $event.value, model.armorRefine)"
          (onClear)="onClearItem('armor')"
          placeholder="Armor"
        ></p-dropdown>
      </div>
      <div class="col-fixed" style="width: 80px">
        <p-dropdown
          [options]="refineList"
          [(ngModel)]="model.armorRefine"
          [disabled]="!model.armor"
          (onChange)="onSelectItem('armor', model.armor, $event.value)"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="armorCard"
          [autoDisplayFirst]="false"
          [options]="armorCardList"
          [(ngModel)]="model.armorCard"
          [disabled]="!model.armor"
          [showClear]="true"
          (onChange)="onSelectItem('armorCard', $event.value)"
          placeholder="Card"
        ></p-dropdown>
      </div>
      <div class="col-12">
        <div class="grid">
          <div class="col-3"></div>
          <div class="col-3">
            <p-dropdown
              inputId="armorEnchant1"
              [autoDisplayFirst]="false"
              [options]="armorEnchant1List"
              [(ngModel)]="model.armorEnchant1"
              [showClear]="true"
              [disabled]="armorEnchant1List.length === 0 || !model.armor"
              (onChange)="onSelectItem('armorEnchant1', $event.value)"
              placeholder="Enchant 2"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="armorEnchant2"
              [autoDisplayFirst]="false"
              [options]="armorEnchant2List"
              [(ngModel)]="model.armorEnchant2"
              [showClear]="true"
              [disabled]="armorEnchant2List.length === 0 || !model.armor"
              (onChange)="onSelectItem('armorEnchant2', $event.value)"
              placeholder="Enchant 3"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="armorEnchant3"
              [autoDisplayFirst]="false"
              [options]="armorEnchant3List"
              [(ngModel)]="model.armorEnchant3"
              [showClear]="true"
              [disabled]="armorEnchant3List.length === 0 || !model.armor"
              (onChange)="onSelectItem('armorEnchant3', $event.value)"
              placeholder="Enchant 4"
            ></p-dropdown>
          </div>
        </div>
      </div>
    </div>

    <!-- Garment -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="garment"
          [autoDisplayFirst]="false"
          [options]="garmentList"
          [(ngModel)]="model.garment"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="
            onSelectItem('garment', $event.value, model.garmentRefine)
          "
          (onClear)="onClearItem('garment')"
          placeholder="Garment"
        ></p-dropdown>
      </div>
      <div class="col-fixed" style="width: 80px">
        <p-dropdown
          [options]="refineList"
          [(ngModel)]="model.garmentRefine"
          [disabled]="!model.garment"
          (onChange)="onSelectItem('garment', model.garment, $event.value)"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="garmentCard"
          [autoDisplayFirst]="false"
          [options]="garmentCardList"
          [(ngModel)]="model.garmentCard"
          [disabled]="!model.garment"
          [showClear]="true"
          (onChange)="onSelectItem('garmentCard', $event.value)"
          placeholder="Card"
        ></p-dropdown>
      </div>
      <div class="col-12">
        <div class="grid">
          <div class="col-3"></div>
          <div class="col-3">
            <p-dropdown
              inputId="garmentEnchant1"
              [autoDisplayFirst]="false"
              [options]="garmentEnchant1List"
              [(ngModel)]="model.garmentEnchant1"
              [showClear]="true"
              [disabled]="garmentEnchant1List.length === 0 || !model.garment"
              (onChange)="onSelectItem('garmentEnchant1', $event.value)"
              placeholder="Enchant 2"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="garmentEnchant2"
              [autoDisplayFirst]="false"
              [options]="garmentEnchant2List"
              [(ngModel)]="model.garmentEnchant2"
              [showClear]="true"
              [disabled]="garmentEnchant2List.length === 0 || !model.garment"
              (onChange)="onSelectItem('garmentEnchant2', $event.value)"
              placeholder="Enchant 3"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="garmentEnchant3"
              [autoDisplayFirst]="false"
              [options]="garmentEnchant3List"
              [(ngModel)]="model.garmentEnchant3"
              [showClear]="true"
              [disabled]="garmentEnchant3List.length === 0 || !model.garment"
              (onChange)="onSelectItem('garmentEnchant3', $event.value)"
              placeholder="Enchant 4"
            ></p-dropdown>
          </div>
        </div>
      </div>
    </div>

    <!-- Boot -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="boot"
          [autoDisplayFirst]="false"
          [options]="bootList"
          [(ngModel)]="model.boot"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('boot', $event.value, model.bootRefine)"
          (onClear)="onClearItem('boot')"
          placeholder="Boot"
        ></p-dropdown>
      </div>
      <div class="col-fixed" style="width: 80px">
        <p-dropdown
          [options]="refineList"
          [(ngModel)]="model.bootRefine"
          [disabled]="!model.boot"
          (onChange)="onSelectItem('boot', model.boot, $event.value)"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="bootCard"
          [autoDisplayFirst]="false"
          [options]="bootCardList"
          [(ngModel)]="model.bootCard"
          [disabled]="!model.boot"
          [showClear]="true"
          (onChange)="onSelectItem('bootCard', $event.value)"
          placeholder="Card"
        ></p-dropdown>
      </div>
      <div class="col-12">
        <div class="grid">
          <div class="col-3"></div>
          <div class="col-3">
            <p-dropdown
              inputId="bootEnchant1"
              [autoDisplayFirst]="false"
              [options]="bootEnchant1List"
              [(ngModel)]="model.bootEnchant1"
              [showClear]="true"
              [disabled]="bootEnchant1List.length === 0 || !model.boot"
              (onChange)="onSelectItem('bootEnchant1', $event.value)"
              placeholder="Enchant 2"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="bootEnchant2"
              [autoDisplayFirst]="false"
              [options]="bootEnchant2List"
              [(ngModel)]="model.bootEnchant2"
              [showClear]="true"
              [disabled]="bootEnchant2List.length === 0 || !model.boot"
              (onChange)="onSelectItem('bootEnchant2', $event.value)"
              placeholder="Enchant 3"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="bootEnchant3"
              [autoDisplayFirst]="false"
              [options]="bootEnchant3List"
              [(ngModel)]="model.bootEnchant3"
              [showClear]="true"
              [disabled]="bootEnchant3List.length === 0 || !model.boot"
              (onChange)="onSelectItem('bootEnchant3', $event.value)"
              placeholder="Enchant 4"
            ></p-dropdown>
          </div>
        </div>
      </div>
    </div>

    <!-- Acc Left -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="accLeft"
          [autoDisplayFirst]="false"
          [options]="accLeftList"
          [(ngModel)]="model.accLeft"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('accLeft', $event.value)"
          (onClear)="onClearItem('accLeft')"
          placeholder="Acc L"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="accLeftCard"
          [autoDisplayFirst]="false"
          [options]="accLeftCardList"
          [(ngModel)]="model.accLeftCard"
          [disabled]="!model.accLeft"
          [showClear]="true"
          (onChange)="onSelectItem('accLeftCard', $event.value)"
          placeholder="Card"
        ></p-dropdown>
      </div>

      <div class="col-12">
        <div class="grid">
          <div class="col-3"></div>
          <div class="col-3">
            <p-dropdown
              inputId="accLeftEnchant1"
              [autoDisplayFirst]="false"
              [options]="accLeftEnchant1List"
              [(ngModel)]="model.accLeftEnchant1"
              [showClear]="true"
              [disabled]="accLeftEnchant1List.length === 0 || !model.accLeft"
              (onChange)="onSelectItem('accLeftEnchant1', $event.value)"
              placeholder="Enchant 2"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="accLeftEnchant2"
              [autoDisplayFirst]="false"
              [options]="accLeftEnchant2List"
              [(ngModel)]="model.accLeftEnchant2"
              [showClear]="true"
              [disabled]="accLeftEnchant2List.length === 0 || !model.accLeft"
              (onChange)="onSelectItem('accLeftEnchant2', $event.value)"
              placeholder="Enchant 3"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="accLeftEnchant3"
              [autoDisplayFirst]="false"
              [options]="accLeftEnchant3List"
              [(ngModel)]="model.accLeftEnchant3"
              [showClear]="true"
              [disabled]="accLeftEnchant3List.length === 0 || !model.accLeft"
              (onChange)="onSelectItem('accLeftEnchant3', $event.value)"
              placeholder="Enchant 4"
            ></p-dropdown>
          </div>
        </div>
      </div>
    </div>

    <!-- Acc Right -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="accRight"
          [autoDisplayFirst]="false"
          [options]="accRightList"
          [(ngModel)]="model.accRight"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('accRight', $event.value)"
          (onClear)="onClearItem('accRight')"
          placeholder="Acc R"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="accRightCard"
          [autoDisplayFirst]="false"
          [options]="accRightCardList"
          [(ngModel)]="model.accRightCard"
          [disabled]="!model.accRight"
          [showClear]="true"
          (onChange)="onSelectItem('accRightCard', $event.value)"
          placeholder="Card"
        ></p-dropdown>
      </div>
      <div class="col-12">
        <div class="grid">
          <div class="col-3"></div>
          <div class="col-3">
            <p-dropdown
              inputId="accRightEnchant1"
              [autoDisplayFirst]="false"
              [options]="accRightEnchant1List"
              [(ngModel)]="model.accRightEnchant1"
              [disabled]="!model.accRight"
              [showClear]="true"
              (onChange)="onSelectItem('accRightEnchant1', $event.value)"
              [disabled]="accRightEnchant1List.length === 0"
              placeholder="Enchant 2"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="accRightEnchant2"
              [autoDisplayFirst]="false"
              [options]="accRightEnchant2List"
              [(ngModel)]="model.accRightEnchant2"
              [disabled]="!model.accRight"
              [showClear]="true"
              (onChange)="onSelectItem('accRightEnchant2', $event.value)"
              [disabled]="accRightEnchant2List.length === 0"
              placeholder="Enchant 3"
            ></p-dropdown>
          </div>
          <div class="col-3">
            <p-dropdown
              inputId="accRightEnchant3"
              [autoDisplayFirst]="false"
              [options]="accRightEnchant3List"
              [(ngModel)]="model.accRightEnchant3"
              [disabled]="!model.accRight"
              [showClear]="true"
              [disabled]="accRightEnchant3List.length === 0"
              (onChange)="onSelectItem('accRightEnchant3', $event.value)"
              placeholder="Enchant 4"
            ></p-dropdown>
          </div>
        </div>
      </div>
    </div>

    <!-- Pet -->
    <div class="grid">
      <div class="col-3">
        <p-dropdown
          inputId="pet"
          [autoDisplayFirst]="false"
          [options]="petList"
          [(ngModel)]="model.pet"
          [showClear]="true"
          (onChange)="onSelectItem('pet', $event.value)"
          placeholder="Pet"
        ></p-dropdown>
      </div>
    </div>

    <!-- Costume -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="costumeUpper"
          [autoDisplayFirst]="false"
          [options]="[]"
          [disabled]="true"
          [showClear]="true"
          placeholder="Costume Upper"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="costumeEnchantUpper"
          [autoDisplayFirst]="false"
          [options]="costumeEnhUpperList"
          [(ngModel)]="model.costumeEnchantUpper"
          [showClear]="true"
          [disabled]="costumeEnhUpperList.length === 0"
          (onChange)="onSelectItem('costumeEnchantUpper', $event.value)"
          placeholder="Enchant"
        ></p-dropdown>
      </div>
    </div>
    <!-- Middle -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="costumeMiddle"
          [autoDisplayFirst]="false"
          [options]="[]"
          [disabled]="true"
          [showClear]="true"
          placeholder="Costume Middle"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="costumeEnchantMiddle"
          [autoDisplayFirst]="false"
          [options]="costumeEnhMiddleList"
          [(ngModel)]="model.costumeEnchantMiddle"
          [showClear]="true"
          [disabled]="costumeEnhMiddleList.length === 0"
          (onChange)="onSelectItem('costumeEnchantMiddle', $event.value)"
          placeholder="Enchant"
        ></p-dropdown>
      </div>
    </div>
    <!-- Lower -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="costumeLower"
          [autoDisplayFirst]="false"
          [options]="[]"
          [disabled]="true"
          [showClear]="true"
          placeholder="Costume Lower"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="costumeEnchantLower"
          [autoDisplayFirst]="false"
          [options]="costumeEnhLowerList"
          [(ngModel)]="model.costumeEnchantLower"
          [showClear]="true"
          [disabled]="costumeEnhLowerList.length === 0"
          (onChange)="onSelectItem('costumeEnchantLower', $event.value)"
          placeholder="Enchant"
        ></p-dropdown>
      </div>
    </div>
    <!-- Garment -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="costumeGarment"
          [autoDisplayFirst]="false"
          [options]="[]"
          [disabled]="true"
          [showClear]="true"
          placeholder="Costume Garment"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="costumeEnchantGarment"
          [autoDisplayFirst]="false"
          [options]="costumeEnhGarmentList"
          [(ngModel)]="model.costumeEnchantGarment"
          [showClear]="true"
          [disabled]="costumeEnhGarmentList.length === 0"
          (onChange)="onSelectItem('costumeEnchantGarment', $event.value)"
          placeholder="Enchant"
        ></p-dropdown>
      </div>
    </div>

    <!-- Shadow -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="shadowWeapon"
          [autoDisplayFirst]="false"
          [options]="shadowWeaponList"
          [(ngModel)]="model.shadowWeapon"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('shadowWeapon', $event.value)"
          (onClear)="onClearItem('shadowWeapon')"
          placeholder="Shadow Weapon"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="shadowWeaponEnchant1"
          [autoDisplayFirst]="false"
          [options]="basicEnchants"
          [(ngModel)]="model.shadowWeaponEnchant1"
          [showClear]="true"
          [disabled]="basicEnchants.length === 0 || !model.shadowWeapon"
          (onChange)="onSelectItem('shadowWeaponEnchant1', $event.value)"
          placeholder="Enchant 1"
        ></p-dropdown>
      </div>
    </div>
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="shadowArmor"
          [autoDisplayFirst]="false"
          [options]="shadowArmorList"
          [(ngModel)]="model.shadowArmor"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('shadowArmor', $event.value)"
          (onClear)="onClearItem('shadowArmor')"
          placeholder="Shadow Armor"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="shadowArmorEnchant1"
          [autoDisplayFirst]="false"
          [options]="basicEnchants"
          [(ngModel)]="model.shadowArmorEnchant1"
          [showClear]="true"
          [disabled]="basicEnchants.length === 0 || !model.shadowArmor"
          (onChange)="onSelectItem('shadowArmorEnchant1', $event.value)"
          placeholder="Enchant 1"
        ></p-dropdown>
      </div>
    </div>
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="shadowShield"
          [autoDisplayFirst]="false"
          [options]="shadowShieldList"
          [(ngModel)]="model.shadowShield"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('shadowShield', $event.value)"
          (onClear)="onClearItem('shadowShield')"
          placeholder="Shadow Shield"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="shadowShieldEnchant1"
          [autoDisplayFirst]="false"
          [options]="basicEnchants"
          [(ngModel)]="model.shadowShieldEnchant1"
          [showClear]="true"
          [disabled]="basicEnchants.length === 0 || !model.shadowShield"
          (onChange)="onSelectItem('shadowShieldEnchant1', $event.value)"
          placeholder="Enchant 1"
        ></p-dropdown>
      </div>
    </div>
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="shadowBoot"
          [autoDisplayFirst]="false"
          [options]="shadowBootList"
          [(ngModel)]="model.shadowBoot"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('shadowBoot', $event.value)"
          (onClear)="onClearItem('shadowBoot')"
          placeholder="Shadow Boot"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="shadowBootEnchant1"
          [autoDisplayFirst]="false"
          [options]="basicEnchants"
          [(ngModel)]="model.shadowBootEnchant1"
          [showClear]="true"
          [disabled]="basicEnchants.length === 0 || !model.shadowBoot"
          (onChange)="onSelectItem('shadowBootEnchant1', $event.value)"
          placeholder="Enchant 1"
        ></p-dropdown>
      </div>
    </div>
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="shadowEarning"
          [autoDisplayFirst]="false"
          [options]="shadowEarningList"
          [(ngModel)]="model.shadowEarning"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('shadowEarning', $event.value)"
          (onClear)="onClearItem('shadowEarning')"
          placeholder="Shadow Earning"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="shadowEarningEnchant1"
          [autoDisplayFirst]="false"
          [options]="basicEnchants"
          [(ngModel)]="model.shadowEarningEnchant1"
          [showClear]="true"
          [disabled]="basicEnchants.length === 0 || !model.shadowEarning"
          (onChange)="onSelectItem('shadowEarningEnchant1', $event.value)"
          placeholder="Enchant 1"
        ></p-dropdown>
      </div>
    </div>
    <div class="grid grid-nogutter">
      <div class="col-3">
        <p-dropdown
          inputId="shadowPendant"
          [autoDisplayFirst]="false"
          [options]="shadowPendantList"
          [(ngModel)]="model.shadowPendant"
          [showClear]="true"
          (onChange)="setEnchantList($event.value)"
          (onChange)="onSelectItem('shadowPendant', $event.value)"
          (onClear)="onClearItem('shadowPendant')"
          placeholder="Shadow Pendant"
        ></p-dropdown>
      </div>
      <div class="col-3">
        <p-dropdown
          inputId="shadowPendantEnchant1"
          [autoDisplayFirst]="false"
          [options]="basicEnchants"
          [(ngModel)]="model.shadowPendantEnchant1"
          [showClear]="true"
          [disabled]="basicEnchants.length === 0 || !model.shadowPendant"
          (onChange)="onSelectItem('shadowPendantEnchant1', $event.value)"
          placeholder="Enchant 1"
        ></p-dropdown>
      </div>
    </div>

    <!-- Buff -->
    <div class="grid grid-nogutter">
      <div class="col-3">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon" style="width: 130px">{{
            skillBuffs["impositioManus"].label
          }}</span>
          <p-selectButton
            [options]="skillBuffs['impositioManus'].dropdown"
            [(ngModel)]="model.impositioManus"
          ></p-selectButton>
        </div>
      </div>
      <div class="col-3">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon" style="width: 110px">{{
            skillBuffs["advBlessing"].label
          }}</span>
          <p-dropdown
            inputId="advBlessing"
            [autoDisplayFirst]="false"
            [(ngModel)]="model.advBlessing"
            [options]="skillBuffs['advBlessing'].dropdown"
            [showClear]="true"
          ></p-dropdown>
        </div>
      </div>
      <div class="col-3">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon" style="width: 110px">{{
            skillBuffs["advAgiUp"].label
          }}</span>
          <p-dropdown
            inputId="advAgiUp"
            [autoDisplayFirst]="false"
            [(ngModel)]="model.advAgiUp"
            [options]="skillBuffs['advAgiUp'].dropdown"
            [showClear]="true"
          ></p-dropdown>
        </div>
      </div>
      <div class="col-3">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon" style="width: 110px">{{
            skillBuffs["expiatio"].label
          }}</span>
          <p-selectButton
            [options]="skillBuffs['expiatio'].dropdown"
            [(ngModel)]="model.expiatio"
          ></p-selectButton>
        </div>
      </div>

      <!-- <div *ngFor="let skillBuff in skillBuffs" class="col-3">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon">www</span>
          <p-dropdown
            inputId="xxx"
            [autoDisplayFirst]="false"
            [options]="skillBuffs['advBlessing'].dropdown"
            [showClear]="true"
          ></p-dropdown>
        </div>
      </div> -->
    </div>
  </div>

  <!-- Right Side -->
  <div class="p-fluid col-5">
    <!-- Foods / Class Skills -->
    <div class="grid grid-nogutter">
      <div class="col-4">
        <p-listbox
          [options]="consumableList"
          [(ngModel)]="model.consumables"
          [multiple]="true"
          [metaKeySelection]="false"
        ></p-listbox>
      </div>
      <div class="col-4">
        <div class="grid grid-nogutter">
          <div
            *ngFor="let passiveSkill of passiveSkills; let i = index"
            class="col-12"
          >
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon" style="width: 110px">{{
                passiveSkill.label
              }}</span>
              <p-selectButton
                [options]="passiveSkill.dropdown"
                [(ngModel)]="model.passiveSkills[i]"
              ></p-selectButton>
            </div>
          </div>
        </div>
      </div>
      <div class="col-4">
        <div class="grid grid-nogutter">
          <div
            *ngFor="let activeSkill of activeSkills; let i = index"
            class="col-12"
          >
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon" style="width: 110px">{{
                activeSkill.label
              }}</span>
              <p-selectButton
                [options]="activeSkill.dropdown"
                [(ngModel)]="model.activeSkills[i]"
              ></p-selectButton>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Monster -->
    <div class="grid grid-nogutter">
      <div class="col-6">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon" style="width: 80px">Skill</span>
          <p-dropdown
            inputId="monster"
            [autoDisplayFirst]="false"
            [options]="atkSkills"
            [(ngModel)]="model.selectedAtkSkill"
          ></p-dropdown>
        </div>
      </div>
      <div class="col-6">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon" style="width: 80px">Monster</span>
          <p-dropdown
            inputId="monster"
            [autoDisplayFirst]="false"
            [options]="monsterList"
            [(ngModel)]="selectedMonster"
          ></p-dropdown>
        </div>
      </div>
      <div class="col-12">
        minDamage: {{ minDamage }} maxDamage: {{ maxDamage }}
      </div>
      <div class="col-6">
        modelSummary
        <pre [innerHTML]="modelSummary | prettyjson : [true, 3]"></pre>
      </div>
      <div class="col-6">
        totalSummary
        <pre [innerHTML]="totalSummary | prettyjson : [true, 3]"></pre>
      </div>
      <div class="col-6">
        itemSummary
        <pre [innerHTML]="itemSummary | prettyjson : [true, 3]"></pre>
      </div>
      <div class="col-12" [innerHTML]="weaponDesc"></div>
    </div>
  </div>
</div>
