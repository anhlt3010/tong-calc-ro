<p-toast></p-toast>

<div *ngIf="!!myStore?.id" class="grid grid-nogutter">
  <div class="col-12 flex">
    <button
      pButton
      pRipple
      label="New"
      icon="pi pi-plus"
      class="p-button-success mr-2"
      (click)="onCreateItemBtnClick()"
    ></button>
    <button
      pButton
      pRipple
      label="Delete"
      icon="pi pi-trash"
      class="p-button-danger"
      (click)="deleteSelectedItems()"
      [disabled]="!selectedItems || !selectedItems.length"
    ></button>
  </div>
  <div class="col-12">
    <p-table styleClass="p-datatable-sm" [value]="myProductItems" [loading]="isLoading">
      <ng-template pTemplate="header">
        <tr>
          <th>Name</th>
          <th>Price (M)</th>
          <th>Price (Bath)</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr [pSelectableRow]="product">
          <td>{{ product.name }}</td>
          <td>{{ product.m }}</td>
          <td>{{ product.baht }}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="3">Not found</td>
        </tr>
      </ng-template>
    </p-table>
    <p-paginator
      (onPageChange)="pageChange($event)"
      [first]="firstRecord"
      [rows]="pageLimit"
      [totalRecords]="totalRecord"
      [rowsPerPageOptions]="pageOptions"
    ></p-paginator>
  </div>
</div>

<div *ngIf="!myStore?.id" class="grid grid-nogutter">
  <div class="col-12 flex">
    <button
      pButton
      pRipple
      label="Create Store"
      icon="pi pi-plus"
      class="p-button-success mr-2"
      (click)="onCreateStoreBtnClick()"
    ></button>
  </div>
</div>

<app-item-detail-dialog [showDialog]="showCreateNewItemDialog"></app-item-detail-dialog>
<app-store-detail-dialog
  [(showDialog)]="showStoreDialog"
  [store]="myStore"
  (storeModelChange)="onSaveStoreChange($event)"
></app-store-detail-dialog>

<p-dialog [(visible)]="showConfirmDeleteDialog" header="Confirm" [modal]="true" [style]="{ width: '450px' }">
  <div class="flex align-items-center justify-content-center">
    <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
    <span>Are you sure you want to delete selected products?</span>
  </div>
  <ng-template pTemplate="footer">
    <button
      pButton
      pRipple
      icon="pi pi-times"
      class="p-button-text"
      label="No"
      (click)="showConfirmDeleteDialog = false"
    ></button>
    <button
      pButton
      pRipple
      icon="pi pi-check"
      class="p-button-text"
      label="Yes"
      (click)="confirmDeleteSelected()"
    ></button>
  </ng-template>
</p-dialog>
